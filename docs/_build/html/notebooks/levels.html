<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Levels &mdash; pyWaPOR  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="pyWaPOR vs. WaPOR" href="wapor_vs_pywapor.html" />
    <link rel="prev" title="Composites" href="composites.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> pyWaPOR
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_sources.html">Data</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../_user_guide.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="pywapor_101.html">pyWaPOR Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="composites.html">Composites</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Levels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Level-2-inputs">Level-2 inputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Custom-inputs">Custom inputs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="wapor_vs_pywapor.html">pyWaPOR vs. WaPOR</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../_functions.html">Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">Bibliography</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pyWaPOR</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../_user_guide.html">User Guide</a> &raquo;</li>
      <li>Levels</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/notebooks/levels.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="Levels">
<h1>Levels<a class="headerlink" href="#Levels" title="Permalink to this headline"></a></h1>
<p>In this notebook we’ll take a look at how to run <code class="docutils literal notranslate"><span class="pre">et_look</span></code> at different levels than the standard <code class="docutils literal notranslate"><span class="pre">level_1</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">!</span>pip install <span class="nv">pywapor</span><span class="o">==</span><span class="m">2</span>.3.4 --quiet
</pre></div>
</div>
</div>
<p>First we redefine some of the basic inputs variables.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pywapor</span>

<span class="n">project_folder</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;/Users/hmcoerver/pywapor_notebooks&quot;</span>
<span class="n">latlim</span> <span class="o">=</span> <span class="p">[</span><span class="mf">28.9</span><span class="p">,</span> <span class="mf">29.7</span><span class="p">]</span>
<span class="n">lonlim</span> <span class="o">=</span> <span class="p">[</span><span class="mf">30.2</span><span class="p">,</span> <span class="mf">31.2</span><span class="p">]</span>
<span class="n">startdate</span> <span class="o">=</span> <span class="s2">&quot;2021-07-01&quot;</span>
<span class="n">enddate</span> <span class="o">=</span> <span class="s2">&quot;2021-07-11&quot;</span>
</pre></div>
</div>
</div>
<section id="Level-2-inputs">
<h2>Level-2 inputs<a class="headerlink" href="#Level-2-inputs" title="Permalink to this headline"></a></h2>
<p>Now that we have run ETLook for a simple use case, we’ll have a look at how to run it at different levels and with different input datasets.</p>
<p>When downloading input data with <code class="docutils literal notranslate"><span class="pre">pywapor.pre_et_look.main</span></code> as we did before, it is possible to select a level for which to download data. By default, this level is set to <code class="docutils literal notranslate"><span class="pre">level_1</span></code>.</p>
<p>We can have a closer look at what this actually means by running the following functions.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">level</span> <span class="o">=</span> <span class="s2">&quot;level_1&quot;</span>
<span class="n">levels</span> <span class="o">=</span> <span class="n">pywapor</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">get_source_level_selections</span><span class="p">()</span>
<span class="n">pywapor</span><span class="o">.</span><span class="n">post_et_look</span><span class="o">.</span><span class="n">prettyprint</span><span class="p">(</span><span class="n">levels</span><span class="p">[</span><span class="n">level</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
METEO
 [&#39;GEOS5&#39;]
NDVI
 [&#39;MOD13&#39;, &#39;MYD13&#39;]
ALBEDO
 [&#39;MDC43&#39;]
LST
 [&#39;MOD11&#39;, &#39;MYD11&#39;]
LULC
 [&#39;WAPOR&#39;]
DEM
 [&#39;SRTM&#39;]
PRECIPITATION
 [&#39;CHIRPS&#39;]
TRANS
 [&#39;MERRA2&#39;]
</pre></div></div>
</div>
<p>You can see here which datasets are used for each (type of) variable. For example, the NDVI map we’ve used as input to ETLook was created using data from <code class="docutils literal notranslate"><span class="pre">MOD13</span></code> and <code class="docutils literal notranslate"><span class="pre">MYD13</span></code>. Notice that this information was also stored in the metadata (json) file that we’ve looked at earlier.</p>
<p>We can check which other levels are available in this version of <code class="docutils literal notranslate"><span class="pre">pywapor</span></code> by checking the keys in the levels dictionary we’ve just created.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">levels</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dict_keys([&#39;level_1&#39;, &#39;level_2&#39;])
</pre></div></div>
</div>
<p>Let’s have a look at the datasets used for <code class="docutils literal notranslate"><span class="pre">level_2</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">level</span> <span class="o">=</span> <span class="s2">&quot;level_2&quot;</span>
<span class="n">pywapor</span><span class="o">.</span><span class="n">post_et_look</span><span class="o">.</span><span class="n">prettyprint</span><span class="p">(</span><span class="n">levels</span><span class="p">[</span><span class="n">level</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
METEO
 [&#39;GEOS5&#39;]
NDVI
 [&#39;PROBAV&#39;]
ALBEDO
 [&#39;PROBAV&#39;]
LST
 [&#39;MOD11&#39;, &#39;MYD11&#39;]
LULC
 [&#39;WAPOR&#39;]
DEM
 [&#39;SRTM&#39;]
PRECIPITATION
 [&#39;CHIRPS&#39;]
TRANS
 [&#39;MERRA2&#39;]
</pre></div></div>
</div>
<p>As you can see, the difference between <code class="docutils literal notranslate"><span class="pre">level_1</span></code> and <code class="docutils literal notranslate"><span class="pre">level_2</span></code> is the dataset used to create the NDVI and ALBEDO inputs. For <code class="docutils literal notranslate"><span class="pre">level_2</span></code>, they are derived from PROBA-V images, which have a higher resolution than the MODIS products.</p>
<p>Let’s give <code class="docutils literal notranslate"><span class="pre">level_2</span></code> a try! Beware though, that the downloading of the PROBA-V images can take some time!</p>
<blockquote>
<div><p>⚠️</p>
<p>You’ll notice that you’ll be prompted for another username and password. This time for a <a class="reference external" href="https://www.vito-eodata.be/PDF/portal/Application.html">VITO account</a>. We could set this account up by running <code class="docutils literal notranslate"><span class="pre">pywapor.collect.setup_dl_accounts.setup_account(&quot;VITO&quot;)</span></code> as well (like we did before for the NASA and WAPOR accounts). But <code class="docutils literal notranslate"><span class="pre">pywapor.pre_et_look.main</span></code> also checks if the required accounts can be found and gives a prompt if thats’s not the case.</p>
<p>You can create a VITO account <a class="reference external" href="https://www.vito-eodata.be/PDF/portal/Application.html">here</a>.</p>
<p>⚠️</p>
</div></blockquote>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">level</span> <span class="o">=</span> <span class="s2">&quot;level_2&quot;</span>
<span class="n">pre_files_lvl2</span> <span class="o">=</span> <span class="n">pywapor</span><span class="o">.</span><span class="n">pre_et_look</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">project_folder</span><span class="p">,</span> <span class="n">startdate</span><span class="p">,</span> <span class="n">enddate</span><span class="p">,</span> <span class="n">latlim</span><span class="p">,</span> <span class="n">lonlim</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

#################
## PRE_ET_LOOK ##
#################

#### NDVI ####
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
2021.07.17: Saving finals.    : 100%|██████████| 230/230 [1:20:04&lt;00:00, 20.9s/it]
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
--&gt; Reprojecting datasets.
--&gt; Calculating composites.

#### ALBEDO ####
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
2021.07.17: Saving finals.    : 100%|██████████| 230/230 [01:04&lt;00:00, 3.58it/s]
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
--&gt; Reprojecting datasets.
--&gt; Calculating composites.

#### PRECIPITATION ####

Downloading daily CHIRPS rainfall data for the period 2021-07-01 till 2021-07-11
Progress: |██████████████████████████████████████████████████| 100.0% Complete
--&gt; Reprojecting datasets.
--&gt; Calculating composites.

#### DEM ####

#### SLOPE ASPECT ####

#### LULC ####

#### METEO ####
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
slp:  86%|████████▌ | 66/77 [00:00&lt;00:00, 1081.86it/s]
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
## t2m ##
--&gt; Reprojecting datasets.
--&gt; Calculating composites.
## t2m-min ##
--&gt; Reprojecting datasets.
--&gt; Calculating composites.
## t2m-max ##
--&gt; Reprojecting datasets.
--&gt; Calculating composites.
## u2m ##
--&gt; Reprojecting datasets.
--&gt; Calculating composites.
## v2m ##
--&gt; Reprojecting datasets.
--&gt; Calculating composites.
## qv2m ##
--&gt; Reprojecting datasets.
--&gt; Calculating composites.
## tqv ##
## ps ##
## slp ##
--&gt; Reprojecting datasets.
--&gt; Calculating composites.

#################
## PRE_SE_ROOT ##
#################

#### NDVI ####
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
2021.07.17: Saving finals.    : 100%|██████████| 230/230 [01:02&lt;00:00, 3.67it/s]
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
--&gt; Reprojecting datasets.
--&gt; Exporting timeseries.

#### LST ####
NASA account: working

Download daily MOD11 Land Surface Temperature data for period 2021-07-01 till 2021-07-11
Progress: |██████████████████████████████████████████████████| 100.0% Complete

Download daily MYD11 Land Surface Temperature data for period 2021-07-01 till 2021-07-11
Progress: |██████████████████████████████████████████████████| 100.0% Complete

#### DEM ####

#### METEO ####
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
slp: 100%|██████████| 287/287 [00:01&lt;00:00, 209.16it/s]
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
## Pair_inst_0 ##
## Pair_inst ##
## qv_inst ##
## tair_inst ##
## wv_inst ##
## v2m_inst ##
## u2m_inst ##

#################
## PRE_SE_ROOT ##
##### DONE ######


#### SE_ROOT ####
--&gt; Calculating se_root.
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
100%|██████████| 41/41 [01:43&lt;00:00,  2.53s/it]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
--&gt; Reprojecting datasets.
--&gt; Calculating composites.
[########################################] | 100% Completed |  1min  6.5s

#### LAT LON ####

#### SOLAR RADIATION ####

Downloading daily MERRA swgnet data for the period 2021-07-01 till 2021-07-11
Progress: |██████████████████████████████████████████████████| 100.0% Complete
--&gt; Reprojecting datasets.
--&gt; Calculating composites.

#### TEMP. AMPLITUDE ####

#################
## PRE_ET_LOOK ##
##### DONE ######

</pre></div></div>
</div>
<p>Downloading and processing the PROBA-V scenes will take quite some time as they are relatively large. But since we’ve already downloaded the other datasets for <code class="docutils literal notranslate"><span class="pre">level_1</span></code>, the function will find much of the other required datasets in the aforementioned <code class="docutils literal notranslate"><span class="pre">RAW</span></code> folder and won’t have to download them again.</p>
<p>We can check the contents of our <code class="docutils literal notranslate"><span class="pre">project_folder</span></code> again by running the following code.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">!</span>ls level_2*/*
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
level_2/metadata_level_2.json

level_2/20210701:
P_24_20210701.tif         r0_20210701.tif           t_air_max_24_20210701.tif
ndvi_20210701.tif         ra_24_20210701.tif        t_air_min_24_20210701.tif
p_air_24_0_20210701.tif   se_root_20210701.tif      u2m_24_20210701.tif
qv_24_20210701.tif        t_air_24_20210701.tif     v2m_24_20210701.tif

level_2/SMC:
SMC_-_-_inst_2021.07.01.09.24.tif SMC_-_-_inst_2021.07.06.11.24.tif
SMC_-_-_inst_2021.07.01.09.30.tif SMC_-_-_inst_2021.07.07.08.42.tif
SMC_-_-_inst_2021.07.01.11.00.tif SMC_-_-_inst_2021.07.07.08.48.tif
SMC_-_-_inst_2021.07.01.11.06.tif SMC_-_-_inst_2021.07.07.10.30.tif
SMC_-_-_inst_2021.07.02.08.24.tif SMC_-_-_inst_2021.07.07.12.00.tif
SMC_-_-_inst_2021.07.02.08.30.tif SMC_-_-_inst_2021.07.07.12.06.tif
SMC_-_-_inst_2021.07.02.11.42.tif SMC_-_-_inst_2021.07.08.09.30.tif
SMC_-_-_inst_2021.07.02.11.48.tif SMC_-_-_inst_2021.07.08.11.06.tif
SMC_-_-_inst_2021.07.03.09.12.tif SMC_-_-_inst_2021.07.08.11.12.tif
SMC_-_-_inst_2021.07.03.10.48.tif SMC_-_-_inst_2021.07.09.08.36.tif
SMC_-_-_inst_2021.07.03.10.54.tif SMC_-_-_inst_2021.07.09.11.48.tif
SMC_-_-_inst_2021.07.04.08.12.tif SMC_-_-_inst_2021.07.09.11.54.tif
SMC_-_-_inst_2021.07.04.08.18.tif SMC_-_-_inst_2021.07.10.09.18.tif
SMC_-_-_inst_2021.07.04.11.30.tif SMC_-_-_inst_2021.07.10.09.24.tif
SMC_-_-_inst_2021.07.04.11.36.tif SMC_-_-_inst_2021.07.10.10.54.tif
SMC_-_-_inst_2021.07.05.09.00.tif SMC_-_-_inst_2021.07.10.11.00.tif
SMC_-_-_inst_2021.07.05.10.36.tif SMC_-_-_inst_2021.07.11.08.18.tif
SMC_-_-_inst_2021.07.05.10.42.tif SMC_-_-_inst_2021.07.11.08.24.tif
SMC_-_-_inst_2021.07.06.08.00.tif SMC_-_-_inst_2021.07.11.11.36.tif
SMC_-_-_inst_2021.07.06.08.06.tif SMC_-_-_inst_2021.07.11.11.42.tif
SMC_-_-_inst_2021.07.06.11.18.tif

level_2/static:
aspect_deg.tif      lon_deg.tif         slope_deg.tif       z_obst_max_2021.tif
land_mask_2021.tif  lue_max_2021.tif    t_amp_year_2021.tif
lat_deg.tif         rs_min_2021.tif     z.tif
</pre></div></div>
</div>
<p>Next, we can run ETLook using the <code class="docutils literal notranslate"><span class="pre">level_2</span></code> data like this.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">files_lvl2</span> <span class="o">=</span> <span class="n">pywapor</span><span class="o">.</span><span class="n">et_look</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">project_folder</span><span class="p">,</span> <span class="n">startdate</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
--&gt; Running ETLook_v2
----&gt; u_24 will be calculated from u2m_24 and v2m_24.
----&gt; trans_24 will be calculated from ra_24.
----&gt; z_oro will be calculated from slope.
----&gt; lw_offset will be constant at -0.3500.
----&gt; lw_slope will be constant at 1.3500.
----&gt; r0_bare will be constant at 0.3800.
----&gt; r0_full will be constant at 0.1800.
----&gt; rn_offset will be constant at -61.0000.
----&gt; rn_slope will be constant at 0.9200.
----&gt; t_opt will be constant at 25.0000.
----&gt; vpd_slope will be constant at -0.3000.
----&gt; resolution is ~103 meter.
</pre></div></div>
</div>
<p>We can check the pixel size in degrees of the <code class="docutils literal notranslate"><span class="pre">level_2</span></code> outputs like this.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">level_2_file</span> <span class="o">=</span> <span class="n">files_lvl2</span><span class="p">[</span><span class="s2">&quot;et_24_mm&quot;</span><span class="p">]</span>

<span class="n">l2_xres</span> <span class="o">=</span> <span class="n">pywapor</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">processing_functions</span><span class="o">.</span><span class="n">get_geoinfo</span><span class="p">(</span><span class="n">level_2_file</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Resolution level_2: </span><span class="si">{0:.4f}</span><span class="s2">°&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">l2_xres</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Resolution level_2: 0.0010°
</pre></div></div>
</div>
</section>
<section id="Custom-inputs">
<h2>Custom inputs<a class="headerlink" href="#Custom-inputs" title="Permalink to this headline"></a></h2>
<p>Besides using the predefined levels, it is also possible to create your own custom level. Instead of passing a string to the <code class="docutils literal notranslate"><span class="pre">level</span></code> input parameter of <code class="docutils literal notranslate"><span class="pre">pywapor.pre_et_look.main</span></code>, we can also pass a dictionary that specifies which products we would like to use.</p>
<p>Lets start by creating such a dictionary by choosing some sources from this table.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 62%" />
<col style="width: 11%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Source</p></th>
<th class="head"><p>Temporal Availability</p></th>
<th class="head"><p>Temporal Resolution</p></th>
<th class="head"><p>Spatial Resolution</p></th>
<th class="head"><p>Used For</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://lpdaac.usgs.gov/products/mod13q1v006/">MOD13</a></p></td>
<td><p>2000-02-18 - ongoing</p></td>
<td><p>16-Daily</p></td>
<td><p>250m</p></td>
<td><p>NDVI</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://lpdaac.usgs.gov/products/myd13q1v006/">MYD13</a></p></td>
<td><p>2002-07-04 - ongoing</p></td>
<td><p>16-Daily</p></td>
<td><p>250m</p></td>
<td><p>NDVI</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://lpdaac.usgs.gov/products/mcd43a1v006/">MCD43</a></p></td>
<td><p>2000-02-16 - ongoing</p></td>
<td><p>Daily</p></td>
<td><p>500m</p></td>
<td><p>Albedo</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://lpdaac.usgs.gov/products/mod11a1v006/">MOD11</a></p></td>
<td><p>2000-02-24 - ongoing</p></td>
<td><p>Daily</p></td>
<td><p>1000m</p></td>
<td><p>LST</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://lpdaac.usgs.gov/products/myd11a1v006/">MYD11</a></p></td>
<td><p>2002-07-04 - ongoing</p></td>
<td><p>Daily</p></td>
<td><p>1000m</p></td>
<td><p>LST</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://www.vito-eodata.be/collectioncatalogue/srv/eng/catalog.search#/metadata/urn:ogc:def:EOP:VITO:PROBAV_S5-TOC_100M_V001">PROBAV</a></p></td>
<td><p>2014-03-11 - ongoing</p></td>
<td><p>5-Daily</p></td>
<td><p>100m</p></td>
<td><p>NDVI, Albedo</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://geos5.org">GEOS5</a></p></td>
<td><p>2017-12-01 - ongoing</p></td>
<td><p>3-Hourly</p></td>
<td><p>0.3125°×0.25°</p></td>
<td><p>Meteo</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://gmao.gsfc.nasa.gov/reanalysis/MERRA-2/">MERRA2</a></p></td>
<td><p>1980-01-01 - ongoing</p></td>
<td><p>Hourly</p></td>
<td><p>0.625°×0.5°</p></td>
<td><p>Meteo</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://www.chc.ucsb.edu/data/chirps">CHIRPS</a></p></td>
<td><p>1981-01-01 - ongoing</p></td>
<td><p>Daily</p></td>
<td><p>0.05°</p></td>
<td><p>Precipitation</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://wapor.apps.fao.org/catalog/WAPOR_2/1/L1_LCC_A">WAPOR</a></p></td>
<td><p>2009 - 2020</p></td>
<td><p>Yearly</p></td>
<td><p>250m</p></td>
<td><p>Landcover</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="http://due.esrin.esa.int/page_globcover.php">GLOBCOVER</a></p></td>
<td><p>2009</p></td>
<td><p>Single</p></td>
<td><p>250m</p></td>
<td><p>Landcover</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://srtm.csi.cgiar.org">SRTM</a></p></td>
<td><p>2009</p></td>
<td><p>Single</p></td>
<td><p>90m</p></td>
<td><p>DEM</p></td>
</tr>
</tbody>
</table>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">my_custom_level</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;METEO&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;MERRA2&quot;</span><span class="p">],</span>
        <span class="s2">&quot;NDVI&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;PROBAV&quot;</span><span class="p">],</span>
        <span class="s2">&quot;ALBEDO&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;MDC43&quot;</span><span class="p">],</span>
        <span class="s2">&quot;LST&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;MOD11&quot;</span><span class="p">,</span> <span class="s2">&quot;MYD11&quot;</span><span class="p">],</span>
        <span class="s2">&quot;LULC&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;GLOBCOVER&quot;</span><span class="p">],</span>
        <span class="s2">&quot;DEM&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;SRTM&quot;</span><span class="p">],</span>
        <span class="s2">&quot;TRANS&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;MERRA2&quot;</span><span class="p">],</span>
        <span class="s2">&quot;PRECIPITATION&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;CHIRPS&quot;</span><span class="p">],</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>We can check if it is possible to run <code class="docutils literal notranslate"><span class="pre">pywapor.pre_et_look.main</span></code> and <code class="docutils literal notranslate"><span class="pre">pywapor.et_look.main</span></code> with this custom level for a chosen start and enddate by passing it into the following function.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">results</span><span class="p">,</span> <span class="n">succes</span> <span class="o">=</span> <span class="n">pywapor</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">tests</span><span class="o">.</span><span class="n">check_source_selection</span><span class="p">(</span><span class="n">my_custom_level</span><span class="p">,</span>
                                                        <span class="n">startdate</span><span class="p">,</span> <span class="n">enddate</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;valid custom level: </span><span class="si">{</span><span class="n">succes</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
valid custom level: True
</pre></div></div>
</div>
<p>Now our custom level is ready! We can have a closer look at the the checks that the function performed by looking at the <code class="docutils literal notranslate"><span class="pre">results</span></code> variable.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pywapor</span><span class="o">.</span><span class="n">post_et_look</span><span class="o">.</span><span class="n">prettyprint</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
METEO
        MERRA2
                valid_source:
                 True
                valid_startdate:
                 True
                valid_enddate:
                 True
NDVI
        PROBAV
                valid_source:
                 True
                valid_startdate:
                 True
                valid_enddate:
                 True
ALBEDO
        MDC43
                valid_source:
                 True
                valid_startdate:
                 True
                valid_enddate:
                 True
LST
        MOD11
                valid_source:
                 True
                valid_startdate:
                 True
                valid_enddate:
                 True
        MYD11
                valid_source:
                 True
                valid_startdate:
                 True
                valid_enddate:
                 True
LULC
        GLOBCOVER
                valid_source:
                 True
                valid_startdate:
                 True
                valid_enddate:
                 True
DEM
        SRTM
                valid_source:
                 True
                valid_startdate:
                 True
                valid_enddate:
                 True
TRANS
        MERRA2
                valid_source:
                 True
                valid_startdate:
                 True
                valid_enddate:
                 True
PRECIPITATION
        CHIRPS
                valid_source:
                 True
                valid_startdate:
                 True
                valid_enddate:
                 True
</pre></div></div>
</div>
<p>As you can see, the function also checks if the selected sources are available for the chosen dates.</p>
<p>Finally, we can give a name to the custom level (but this is not required, the default name is <code class="docutils literal notranslate"><span class="pre">custom</span></code>) and then start downloading the required data.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">my_custom_level</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;my_first_custom_level&quot;</span>

<span class="n">pre_files_cstm</span> <span class="o">=</span> <span class="n">pywapor</span><span class="o">.</span><span class="n">pre_et_look</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">project_folder</span><span class="p">,</span> <span class="n">startdate</span><span class="p">,</span> <span class="n">enddate</span><span class="p">,</span> <span class="n">latlim</span><span class="p">,</span> <span class="n">lonlim</span><span class="p">,</span> <span class="n">my_custom_level</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>And then again, run ETLook like this.</p>
<blockquote>
<div><p>⚠️</p>
<p>Note that here we don’t pass the dictionary, but the name of the level as the level selector!</p>
<p>⚠️</p>
</div></blockquote>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">files_cstm</span> <span class="o">=</span> <span class="n">pywapor</span><span class="o">.</span><span class="n">et_look</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">project_folder</span><span class="p">,</span> <span class="n">startdate</span><span class="p">,</span> <span class="s2">&quot;my_first_custom_level&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
--&gt; Running ETLook_v2
----&gt; u_24 will be calculated from u2m_24 and v2m_24.
----&gt; trans_24 will be calculated from ra_24.
----&gt; z_oro will be calculated from slope.
----&gt; lw_offset will be constant at -0.3500.
----&gt; lw_slope will be constant at 1.3500.
----&gt; r0_bare will be constant at 0.3800.
----&gt; r0_full will be constant at 0.1800.
----&gt; rn_offset will be constant at -61.0000.
----&gt; rn_slope will be constant at 0.9200.
----&gt; t_opt will be constant at 25.0000.
----&gt; vpd_slope will be constant at -0.3000.
----&gt; resolution is ~103 meter.
</pre></div></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="composites.html" class="btn btn-neutral float-left" title="Composites" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="wapor_vs_pywapor.html" class="btn btn-neutral float-right" title="pyWaPOR vs. WaPOR" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, FAO.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>